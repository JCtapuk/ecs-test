import{S as L,a as R,O,W as T,b as U,B as V,P as j,c as N,d as v}from"./assets/stats.module-CpMspLJH.js";const X=document.getElementById("entities-value"),A=document.getElementById("entities-slider"),W=new L,E=new R,c=new O(-5,5,5,-5,.1,10);c.position.z=1;const C=new T({antialias:!0});document.body.appendChild(C.domElement);document.body.appendChild(E.dom);let h=5,w=5;function B(){C.setSize(window.innerWidth,window.innerHeight),c.left=-window.innerWidth/80,c.right=window.innerWidth/80,c.top=window.innerHeight/80,c.bottom=-window.innerHeight/80,c.updateProjectionMatrix(),h=c.right,w=c.top}window.addEventListener("resize",B);B();const x=new U({components:{position:{x:{type:"f32",byte:4,default:0},y:{type:"f32",byte:4,default:0}},velocity:{dx:{type:"f32",byte:4,default:0},dy:{type:"f32",byte:4,default:0}},color:{r:{type:"f32",byte:4,default:1},g:{type:"f32",byte:4,default:0},b:{type:"f32",byte:4,default:0}}}}),u=x.useComponent("position"),f=x.useComponent("velocity"),p=x.useComponent("color");let y=100,m=[],S,z,g=new V,Y=new j({size:10,vertexColors:!0}),k=new N(g,Y);W.add(k);function G(o){y=o,X.textContent=y.toString();for(let n of m)x.destroyEntity(n);m.length=0;for(let n=0;n<y;n++){const t=x.createEntity();u.add(t),f.add(t),p.add(t),u.set(t,"x",(Math.random()-.5)*10),u.set(t,"y",(Math.random()-.5)*10);const e=Math.random()*Math.PI*2;let r=Math.cos(e)*100,a=Math.sin(e)*100;f.set(t,"dx",r),f.set(t,"dy",a);const i=n/y*360,d=q(i/360,.7,.5);p.set(t,"r",d.r),p.set(t,"g",d.g),p.set(t,"b",d.b),m.push(t)}S=new Float32Array(y*3),z=new Float32Array(y*3),g.setAttribute("position",new v(S,3)),g.setAttribute("color",new v(z,3)),F()}function q(o,n,t){let e,r,a;{const i=(d,M,l)=>(l<0&&(l+=1),l>1&&(l-=1),l<.16666666666666666?d+(M-d)*6*l:l<.5?M:l<.6666666666666666?d+(M-d)*(.6666666666666666-l)*6:d),s=t+n-t*n,b=2*t-s;e=i(b,s,o+1/3),r=i(b,s,o),a=i(b,s,o-1/3)}return{r:e,g:r,b:a}}function F(){const o=g.attributes.position.array,n=g.attributes.color.array;for(let t=0;t<m.length;t++){const e=m[t],r=u.get(e,"x"),a=u.get(e,"y"),i=p.get(e,"r"),s=p.get(e,"g"),b=p.get(e,"b");o[t*3]=r,o[t*3+1]=a,o[t*3+2]=0,n[t*3]=i,n[t*3+1]=s,n[t*3+2]=b}g.attributes.position.needsUpdate=!0,g.attributes.color.needsUpdate=!0}const D=9.8,I=.9,J=0;function K(o){const n=o/1e3;for(let t=0;t<m.length;t++){const e=m[t];let r=u.get(e,"x"),a=u.get(e,"y"),i=f.get(e,"dx"),s=f.get(e,"dy");s-=D*n,i+=J*n,r+=i*n,a+=s*n,(r<=-h||r>=h)&&(i=-i*I,r=Math.max(-h+.1,Math.min(h-.1,r))),(a<=-w||a>=w)&&(s=-s*I,a=Math.max(-w+.1,Math.min(w-.1,a))),Math.abs(i)<.5&&(i+=(Math.random()-.5)*1),Math.abs(s)<.5&&(s+=(Math.random()-.5)*1),f.set(e,"dx",i),f.set(e,"dy",s),u.set(e,"x",r),u.set(e,"y",a)}}function Q(){F(),E.begin(),C.render(W,c),E.end()}A.addEventListener("input",()=>{const o=parseInt(A.value);G(o)});let P=0;function H(o){const n=o-P;P=o,K(n),Q(),requestAnimationFrame(H)}G(y);H(0);
