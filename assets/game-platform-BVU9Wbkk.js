import{S as N,a as Q,O as U,W as Z,b as _,f as q,M as F,e as K}from"./stats.module-DRW68m4M.js";let n={};const z=document.getElementById("leftBtn"),G=document.getElementById("upBtn"),M=document.getElementById("rightBtn");z&&(z.addEventListener("touchstart",e=>{e.preventDefault(),n.ArrowLeft=!0}),z.addEventListener("touchend",e=>{e.preventDefault(),n.ArrowLeft=!1}),z.addEventListener("mousedown",()=>n.ArrowLeft=!0),z.addEventListener("mouseup",()=>n.ArrowLeft=!1));G&&(G.addEventListener("touchstart",e=>{e.preventDefault(),n[" "]=!0}),G.addEventListener("touchend",e=>{e.preventDefault(),n[" "]=!1}),G.addEventListener("mousedown",()=>n[" "]=!0),G.addEventListener("mouseup",()=>n[" "]=!1));M&&(M.addEventListener("touchstart",e=>{e.preventDefault(),n.ArrowRight=!0}),M.addEventListener("touchend",e=>{e.preventDefault(),n.ArrowRight=!1}),M.addEventListener("mousedown",()=>n.ArrowRight=!0),M.addEventListener("mouseup",()=>n.ArrowRight=!1));const y=document.createElement("div");y.style.position="absolute";y.style.top="50%";y.style.left="50%";y.style.transform="translate(-50%, -50%)";y.style.color="red";y.style.fontSize="24px";y.style.display="none";document.body.appendChild(y);const H=new N,P=new Q,f=new U;f.position.z=1;const O=new Z({antialias:!0});document.body.appendChild(O.domElement);document.body.appendChild(P.dom);let h=40;function V(){const e=window.innerWidth/window.innerHeight,o=h/e;f.left=-h/2,f.right=h/2,f.top=o/2,f.bottom=-o/2,f.updateProjectionMatrix(),O.setSize(window.innerWidth,window.innerHeight)}window.addEventListener("resize",V);V();const v=new _({components:{position:{x:{type:"f32",byte:4,default:0},y:{type:"f32",byte:4,default:0}},velocity:{dx:{type:"f32",byte:4,default:0},dy:{type:"f32",byte:4,default:0}},size:{width:{type:"f32",byte:4,default:1},height:{type:"f32",byte:4,default:1}},gravity:{value:{type:"f32",byte:4,default:0}},onGround:{value:{type:"u8",byte:1,default:0}}}}),r=v.useComponent("position"),g=v.useComponent("velocity"),l=v.useComponent("size"),T=v.useComponent("gravity"),I=v.useComponent("onGround");let X=[],t=v.createEntity();r.add(t);g.add(t);l.add(t);T.add(t);I.add(t);r.set(t,"x",0);r.set(t,"y",1);g.set(t,"dx",0);g.set(t,"dy",0);l.set(t,"width",1);l.set(t,"height",1);T.set(t,"value",-9.8);I.set(t,"value",0);const $=new q(1,1,1),ee=new F({color:16777215}),Y=new K($,ee);H.add(Y);const W={};window.addEventListener("keydown",e=>{W[e.key]=!0,e.key===" "&&e.preventDefault()});window.addEventListener("keyup",e=>{W[e.key]=!1});function B(e,o,D,L){const s=v.createEntity();r.add(s),l.add(s),r.set(s,"x",e),r.set(s,"y",o),l.set(s,"width",D),l.set(s,"height",L);const u=new q(D,L),S=new F({color:65280}),p=new K(u,S);p.position.set(e,o,0),H.add(p),X.push(s)}function te(){B(0,-9,40,2),B(-5,-5,4,1),B(5,-3,4,1),B(-8,-1,3,1),B(2,1,5,1),B(-3,3,4,1)}te();function ne(e){const o=e/1e3;let D=r.get(t,"x"),L=r.get(t,"y"),s=g.get(t,"dx"),u=g.get(t,"dy");const S=T.get(t,"value");let p=!1;const i=l.get(t,"width"),a=l.get(t,"height");W.ArrowLeft||n.ArrowLeft?s=-5:W.ArrowRight||n.ArrowRight?s=5:s*=.8,(W[" "]||n[" "])&&I.get(t,"value")&&(u=10,p=!1),u+=S*o;let d=D+s*o,c=L+u*o;for(let k of X){const E=r.get(k,"x"),b=r.get(k,"y"),x=l.get(k,"width"),A=l.get(k,"height");if(d+i/2>E-x/2&&d-i/2<E+x/2&&L+a/2>b-A/2&&L-a/2<b+A/2){const m=E-x/2,w=E+x/2,R=d-i/2,C=d+i/2;C>m&&R<m?d=m-i/2:R<w&&C>w&&(d=w+i/2),s=0}if(c+a/2>b-A/2&&c-a/2<b+A/2&&d+i/2>E-x/2&&d-i/2<E+x/2){const m=b-A/2,w=b+A/2,R=c-a/2,C=c+a/2;C>m&&R<m?(c=m-a/2,u=0):R<w&&C>w&&(c=w+a/2,u=0,p=!0)}}d-i/2<-h/2&&(d=-h/2+i/2),d+i/2>h/2&&(d=h/2-i/2),c-a/2<-20/2&&(c=-20/2+a/2,u=0,p=!0),r.set(t,"x",d),r.set(t,"y",c),g.set(t,"dx",s),g.set(t,"dy",u),I.set(t,"value",p?1:0)}function oe(){P.begin();let e=r.get(t,"x"),o=r.get(t,"y");Y.position.set(e,o,0),f.position.set(e,o,1),O.render(H,f),P.end()}let j=0;function J(e){const o=e-j;j=e,ne(o),oe(),requestAnimationFrame(J)}J(0);
