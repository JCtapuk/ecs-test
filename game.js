import{S as J,a as Q,O as Z,W as _,b as $,B as V,P as ee,c as te,d as S,M as ne,e as oe}from"./assets/stats.module-CpMspLJH.js";let c={};const B=document.getElementById("leftBtn"),C=document.getElementById("upBtn"),R=document.getElementById("rightBtn");B&&(B.addEventListener("touchstart",t=>{t.preventDefault(),c.ArrowLeft=!0}),B.addEventListener("touchend",t=>{t.preventDefault(),c.ArrowLeft=!1}),B.addEventListener("mousedown",()=>c.ArrowLeft=!0),B.addEventListener("mouseup",()=>c.ArrowLeft=!1));C&&(C.addEventListener("touchstart",t=>{t.preventDefault(),c.ArrowUp=!0}),C.addEventListener("touchend",t=>{t.preventDefault(),c.ArrowUp=!1}),C.addEventListener("mousedown",()=>c.ArrowUp=!0),C.addEventListener("mouseup",()=>c.ArrowUp=!1));R&&(R.addEventListener("touchstart",t=>{t.preventDefault(),c.ArrowRight=!0}),R.addEventListener("touchend",t=>{t.preventDefault(),c.ArrowRight=!1}),R.addEventListener("mousedown",()=>c.ArrowRight=!0),R.addEventListener("mouseup",()=>c.ArrowRight=!1));const re=document.getElementById("entities-value"),W=document.getElementById("entities-slider"),m=document.createElement("div");m.style.position="absolute";m.style.top="50%";m.style.left="50%";m.style.transform="translate(-50%, -50%)";m.style.color="red";m.style.fontSize="24px";m.style.display="none";document.body.appendChild(m);const G=new J,U=new Q,b=new Z(-5,5,5,-5,.1,10);b.position.z=1;const P=new _({antialias:!0});document.body.appendChild(P.domElement);document.body.appendChild(U.dom);let y=10,f=10;function T(){P.setSize(window.innerWidth,window.innerHeight),b.left=-window.innerWidth/80,b.right=window.innerWidth/80,b.top=window.innerHeight/80,b.bottom=-window.innerHeight/80,b.updateProjectionMatrix(),y=b.right,f=b.top}window.addEventListener("resize",T);T();const L=new $({components:{position:{x:{type:"f32",byte:4,default:0},y:{type:"f32",byte:4,default:0}},velocity:{dx:{type:"f32",byte:4,default:0},dy:{type:"f32",byte:4,default:0}},color:{r:{type:"f32",byte:4,default:1},g:{type:"f32",byte:4,default:0},b:{type:"f32",byte:4,default:0}},rotation:{angle:{type:"f32",byte:4,default:0}}}}),s=L.useComponent("position"),g=L.useComponent("velocity"),E=L.useComponent("color"),z=L.useComponent("rotation");let A=100,x=[],F,O,M=new V,se=new ee({size:20,vertexColors:!0}),ie=new te(M,se);G.add(ie);let o=L.createEntity();s.add(o);g.add(o);z.add(o);s.set(o,"x",0);s.set(o,"y",0);g.set(o,"dx",0);g.set(o,"dy",0);z.set(o,"angle",0);const j=new V,ae=new Float32Array([0,.5,0,-.3,-.5,0,.3,-.5,0]);j.setAttribute("position",new S(ae,3));const de=new ne({color:16777215}),k=new oe(j,de);G.add(k);const I={};window.addEventListener("keydown",t=>{I[t.key]=!0});window.addEventListener("keyup",t=>{I[t.key]=!1});function q(t){A=t,re.textContent=A.toString();for(let n of x)L.destroyEntity(n);x.length=0;for(let n=0;n<A;n++){const e=L.createEntity();s.add(e),g.add(e),E.add(e);const r=Math.floor(Math.random()*4);let d,l;r===0?(d=-y,l=(Math.random()-.5)*f*2):r===1?(d=y,l=(Math.random()-.5)*f*2):r===2?(l=-f,d=(Math.random()-.5)*y*2):(l=f,d=(Math.random()-.5)*y*2),s.set(e,"x",d),s.set(e,"y",l);const u=Math.random()*Math.PI*2,w=.1+Math.random()*1;g.set(e,"dx",Math.cos(u)*w),g.set(e,"dy",Math.sin(u)*w);const h=n/A*360,a=le(h/360,.7,.5);E.set(e,"r",a.r),E.set(e,"g",a.g),E.set(e,"b",a.b),x.push(e)}F=new Float32Array(A*3),O=new Float32Array(A*3),M.setAttribute("position",new S(F,3)),M.setAttribute("color",new S(O,3)),K()}function le(t,n,e){let r,d,l;{const u=(a,p,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<.16666666666666666?a+(p-a)*6*i:i<.5?p:i<.6666666666666666?a+(p-a)*(.6666666666666666-i)*6:a),w=e+n-e*n,h=2*e-w;r=u(h,w,t+1/3),d=u(h,w,t),l=u(h,w,t-1/3)}return{r,g:d,b:l}}function K(){const t=M.attributes.position.array,n=M.attributes.color.array;for(let e=0;e<x.length;e++){const r=x[e],d=s.get(r,"x"),l=s.get(r,"y"),u=E.get(r,"r"),w=E.get(r,"g"),h=E.get(r,"b");t[e*3]=d,t[e*3+1]=l,t[e*3+2]=0,n[e*3]=u,n[e*3+1]=w,n[e*3+2]=h}M.attributes.position.needsUpdate=!0,M.attributes.color.needsUpdate=!0}let D=!0;function ce(t){if(!D)return;const n=t/1e3;let e=s.get(o,"x"),r=s.get(o,"y"),d=g.get(o,"dx"),l=g.get(o,"dy"),u=z.get(o,"angle");(I.ArrowLeft||c.ArrowLeft)&&(u+=3*n),(I.ArrowRight||c.ArrowRight)&&(u-=3*n),(I.ArrowUp||c.ArrowUp)&&(d+=-Math.sin(u)*5*n,l+=Math.cos(u)*5*n),d*=.99,l*=.99,e+=d*n,r+=l*n,e<-y&&(e=y),e>y&&(e=-y),r<-f&&(r=f),r>f&&(r=-f),s.set(o,"x",e),s.set(o,"y",r),g.set(o,"dx",d),g.set(o,"dy",l),z.set(o,"angle",u);for(let a=0;a<x.length;a++){const p=x[a];let i=s.get(p,"x"),v=s.get(p,"y");const X=g.get(p,"dx"),Y=g.get(p,"dy");i+=X*n,v+=Y*n,i<-y&&(i=y),i>y&&(i=-y),v<-f&&(v=f),v>f&&(v=-f),s.set(p,"x",i),s.set(p,"y",v)}const w=.5,h=.5;for(let a of x){const p=s.get(a,"x"),i=s.get(a,"y");if(Math.sqrt((e-p)**2+(r-i)**2)<w+h){D=!1,m.textContent="Game Over! Collision detected.",m.style.display="block";return}}}function ue(){K(),U.begin();let t=s.get(o,"x"),n=s.get(o,"y"),e=z.get(o,"angle");k.position.set(t,n,0),k.rotation.z=e,P.render(G,b),U.end()}W.addEventListener("input",()=>{const t=parseInt(W.value);q(t)});let H=0;function N(t){const n=t-H;H=t,ce(n),ue(),D&&requestAnimationFrame(N)}q(A);N(0);
